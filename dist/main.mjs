var v=Math.pow;var g=25,S=.1,f=[],l=0,x;function A(e){f=e,l=0}var s=!1;function y(e,t,c,u,i){let n=60/c,a=0;u.forEach((o,r)=>N(e,(u[r].Beat-1)*n,t,o,n)),i()}function p(e,t,c,u){let i=60/c;s=!0;let n=(f[l].Beat-1)*i;e.currentTime+S>=n&&(N(e,n,t,f[l],i),l++,l>=f.length&&(b(),u())),s&&(x=setTimeout(()=>p(e,t,c,u),g))}function b(){clearTimeout(x),l=0,s=!1}function N(e,t,c,u,i){let n=e.createBufferSource(),a=e.createGain();a.gain.setValueAtTime(.25,t),n.buffer=c,n.playbackRate.value=w(69,u.MidiNote),n.connect(a).connect(e.destination),n.start(t),console.log("time?: ",t),console.log("actualtime: ",new Date().getTime()),a.gain.linearRampToValueAtTime(0,t+u.Duration*i)}function w(e=69,t){return v(2,(t-e)/12)}function B(e,t,c){let u=60/c;for(let i=0;i<t;i++){let n=u*i,a=u*i+.2,o=e.createOscillator(),r=e.createGain();o.frequency.value=i===0?600:500,r.gain.value=.5,r.gain.exponentialRampToValueAtTime(.001,n+.01),o.connect(r),o.connect(e.destination),o.start(n),o.stop(a)}}var T;(a=>{function e(){}a.CreateSinth=e;function t(o,r,d){let m=new AudioContext;p(m,o,r,d)}a.play=t;function c(o,r,d,m){let P=new AudioContext;y(P,o,r,d,m)}a.playFull=c;function u(o,r){let d=new AudioContext;B(d,o,r)}a.playMetronome=u;function i(){b()}a.stop=i;function n(o){A(o)}a.initplay=n})(T||(T={}));export{T as Sinth};
//# sourceMappingURL=main.mjs.map